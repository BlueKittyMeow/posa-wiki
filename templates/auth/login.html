{% extends "base.html" %}

{% block title %}Login - Posa Wiki{% endblock %}

{% block content %}
<div class="card" style="max-width: 500px; margin: 2rem auto;">
    <div class="card-header">
        <h2 class="card-title">🔐 Admin Login</h2>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}" style="padding: 1rem; margin-bottom: 1rem; border-radius: var(--border-radius-sm); {% if category == 'error' %}background: var(--accent-danger); color: var(--bg-primary);{% else %}background: var(--accent-secondary); color: var(--bg-primary);{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('auth.login') }}">
        {{ form.hidden_tag() }}

        <div class="form-group mb-2">
            <label class="form-label" for="username">Username</label>
            <input
                type="text"
                id="username"
                name="{{ form.username.name }}"
                value="{{ form.username.data|default('', true) }}"
                required
                autofocus
                style="width: 100%;"
                placeholder="Enter your username"
            >
            {% if form.username.errors %}
                <div class="form-error" style="color: var(--accent-danger); font-size: 0.85rem; margin-top: 0.25rem;">
                    {{ form.username.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="form-group mb-2">
            <label class="form-label" for="password">Password</label>
            <input
                type="password"
                id="password"
                name="{{ form.password.name }}"
                required
                style="width: 100%;"
                placeholder="Enter your password"
            >
            {% if form.password.errors %}
                <div class="form-error" style="color: var(--accent-danger); font-size: 0.85rem; margin-top: 0.25rem;">
                    {{ form.password.errors[0] }}
                </div>
            {% endif %}
        </div>

        <div class="form-group mb-2" style="flex-direction: row; align-items: center; gap: 0.5rem;">
            <input
                type="checkbox"
                id="remember"
                name="{{ form.remember_me.name }}"
                style="width: auto;"
                {% if form.remember_me.data %}checked{% endif %}
            >
            <label for="remember" style="margin: 0; cursor: pointer;">Remember me</label>
        </div>

        <div style="margin-top: 1.5rem;">
            <button type="submit" class="btn" style="width: 100%;">
                🔓 {{ form.submit.label.text }}
            </button>
        </div>
    </form>

    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--bg-tertiary); text-align: center;">
        <p class="text-muted" style="font-size: 0.9rem;">
            Admin access only. Contact the site administrator for credentials.
        </p>
    </div>
</div>
{% endblock %}
